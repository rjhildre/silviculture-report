{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Silviculture Report</title>
        <!--------------------------------------------- Bootstrap----------------------->
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="{% static 'report/style.css' %}" type="text/css">
    </head>
    <body>
        <div class="container-fluid">
            <div class="row justify-content-sm-center">
                    <div class="col-sm-8"><img class="img-fluid" src="{% static 'report/images/em_dnr_logo_2_color_long_PNG.png' %}" alt="DNR Logo"></div>
            </div>
            <div class="row justify-content-sm-center page-break-after">
                <div class="col-sm-8"><h2 style="text-align:center">Forest Management Activities (FMAs) Report<br>including information of overlapping FMAs
                <br>for {{ timber_sale|title }} Timber Sale</h2></div>
            </div>
            {% for k, v in fma_details.items %}
            <div class="page-break-after">
                <div id="fma-header">
                    <div class="row justify-content-sm-center"><h4>Activity Information for FMA: {{ k }}</h4></div>
                    <div class="row">
                        <div class="col-sm-3">FMA ID: <strong>{{ v.fma_id }}</strong></div>
                        <div class="col-sm-3">FMA Status: <strong>{{ v.fma_status }}</strong></div>
                        <div class="col-sm-3">FMA Type: <strong>{{ v.fma_type }}</strong></div>
                        <div class="col-sm-3">Technique: <strong>{{ v.fma_technique }}</strong></div>
                    </div>
                    <div class="row">
                            <div class="col-sm-3">Completion Date: <strong>{{ v.fma_date|date:"SHORT_DATE_FORMAT" }}</strong></div>
                            <div class="col-sm-3">Acres: <strong>{{ v.fma_acres_treated }}</strong></div>
                            <div class="col-sm-3">Crew: <strong>{{ v.fma_crew }}</strong></div>
                    </div>
                    <div class="row">
                            <div class="col-sm-3">Region: <strong>{{ v.fma_region }}</strong></div>
                            <div class="col-sm-3">District: <strong>{{ v.fma_district }}</strong></div>
                            <div class="col-sm-3">Admin: <strong>{{ v.fma_admin }}</strong></div>
                    </div>
                </div>
                <div id="fma-body">
                    <div>
                        <strong>Silvicultural Prescription:</strong>
                        {{ v.harvest_comments|linebreaks }}
                    </div>
                    <div>
                        <strong>FMA Comments:</strong>
                        {{ v.fma_comments|linebreaks }}
                    </div>
                </div>
                <div id="overlapping-fmas">
                    <div>
                        <div class="row">
                            <div class="col-sm-3"><h4 id="overlapping-activities">Overlapping Activities:</h4></div>
                        </div>
                        <div class="row" >
                            <div class="col-sm-1" id="overlap-header">FMA ID</div>
                            <div class="col-sm-2" id="overlap-header">FMA Name</div>
                            <div class="col-sm-2" id="overlap-header">Fma Type</div>
                            <div class="col-sm-2" id="overlap-header">Technique</div>
                            <div class="col-sm-2" id="overlap-header">Date</div>
                            <div class="col-sm-2" id="overlap-header">Status</div>
                            <div class="col-sm-1" id="overlap-header">Overlap Acres</div>
                        </div>
                    </div>
                    {% for fma, overlap_fma, fma_nm, fma_type, fma_tech, fma_date, fma_status, acres, comments in overlapping_fmas %}
                    {% if fma == v.fma_id %}
                    <div class="row" id="overlap-detail"> 
                        <div class="col-sm-1">{{ overlap_fma }}</div>
                        <div class="col-sm-2">{{ fma_nm }}</div>
                        <div class="col-sm-2">{{ fma_type }}</div>
                        <div class="col-sm-2">{{ fma_tech }}</div>
                        <div class="col-sm-2">{{ fma_date|date:"SHORT_DATE_FORMAT" }}</div>
                        <div class="col-sm-2">{{ fma_status }}</div>
                        <div class="col-sm-1">{{ acres|floatformat:2 }}</div>
                        <div class="col-sm-12"><strong>Comments:</strong> {{ comments|linebreaks }}</div>
                    </div>   
                    {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}   
        </div>
    </body>
