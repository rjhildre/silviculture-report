{% load static %}
<!DOCTYPE html> 
<html lang="en">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130356984-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-130356984-1');
        </script>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Silviculture Report</title>
        <!--------------------------------------------- Bootstrap----------------------->
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <!-- Custom CSS -->
        <link rel="stylesheet" href="{% static 'report/style.css' %}" type="text/css">
        <!-- Validation script to enusre form submission matches on of the options in the datalist -->
        <script>
        function datalistValidator(salename) {
            var obj = $("#timber-sales").find("option[value='" + salename + "']");
            if(obj != null && obj.length>0) {
                return true
            }
            return false;
        }
        $(document).ready(function() {
            $('#timber-sale-form').submit(function() {
                var salename = $("#sale-name-field").val();
                if (datalistValidator(salename)) {
                    return true;
                }
                alert("Hmm... your submission of " + salename + " does not seem to be on the list of timber sale names. Please make sure you selected an item" +
                "from the dropdown list and then hit submit again.");
                return false;
            })
        })
        </script>
        <script>
                function fmalistValidator(salename) {
                    var obj = $("#fmas-list").find("option[value='" + salename + "']");
                    if(obj != null && obj.length>0) {
                        return true
                    }
                    return false;
                }
                $(document).ready(function() {
                    $('#fma-sale-form').submit(function() {
                        var salename = $("#fma-name-field").val();
                        if (fmalistValidator(salename)) {
                            return true;
                        }
                        alert("Hmm... your submission of " + salename + " does not seem to be on the list of fma sale names. Please make sure you selected an item" +
                        "from the dropdown list and then hit submit again.");
                        return false;
                    })
                })
                </script>
    </head>
    
    <body id="index">
        <div class="container-fluid">
            <div class="row justify-content-sm-center">
                <div class="col-sm-8"><img class="img-fluid" src="{% static 'report/images/em_dnr_logo_2_color_long_PNG.png' %}" alt="DNR Logo"></div>
            </div>
            <div class="row justify-content-center">
                <div class="col-sm-10"><h1 class="main-heading">Silvicultural Prescription Report Generator</h1></div>
            </div>
            <div class="row">
                <div class="col-sm-5 offset-sm-1">
                    <p id="left-content">Select a timber sale or timber harvest activity, 
                        then click the “Submit” button to generate a Silvicultural Prescription Report.<br>
                        Try typing the same of your timber sale or havest activitiy to go straight to it.  
                    </p>
                </div>
                <!---------------------------------------------------Timber sale drop down ------------------------------>
                <div class="col-sm-4 offset-sm-1 align-self-center">
                    <form action="timber-sale-report" id="timber-sale-form" target="_blank">
                        Timber Sale Name - ID: <br>
                        <input list="timber-sales" name="timber-sale" id="sale-name-field" required>
                        <datalist id="timber-sales">
                            {% for timber_sale in timber_sales %}
                            <option value="{{ timber_sale.1 }} - {{ timber_sale.0 }}">
                            {% endfor %}
                            </datalist>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-5 offset-sm-1">
                    <p id="left-content">
                    </p>
                </div>
                <!---------------------------------------------------------------FMA dropdown --------------------------------------------->
                <div class="col-sm-4 offset-sm-1 align-self-center">
                    <form action="fma-report" id="fma-sale-form" target="_blank">
                        Harvest Activity Name - ID:<br>
                        <input list="fmas-list" name="fma" id="fma-name-field" required>
                        <datalist id="fmas-list">
                            {% for fma in fmas %}
                            <option value="{{ fma.0 }} - {{ fma.1 }}"></option>
                            {% endfor %}
                            </datalist>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>